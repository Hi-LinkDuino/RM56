# DM认证操作步骤

## 注意事项
- DM认证过程有严格操作顺序要求，不能随意更改。
## 操作步骤
1. 两设备烧录完成，上电启动，确保WIFI热点上线，出现“分布式音乐播放器”界面。
2. 两台设备点击DM启动按键，两设备进入DM认证界面。

   ```c#
   #                                                +-------------------------------------+
   #                                                |  +----------+         +----------+  |
   #                                                   | 发现设备 |          | 发起认证 |  
   #                  +-----------------+              +----------+         +----------+  
   #                  | 分布式音乐播放器 |   --->                                        
   #                  +-----------------+              +----------+         +----------+  
   #                                                   | 允许认证 |          | 输入PIN码 |  
   #                                                |  +----------+         +----------+  |
   #                                                +-------------------------------------+
   ```
3. 两台设备点击“发现设备”按钮，选择其中一台设备做为DM认证发起设备，另一台设备则为认证控制设备（下文分别称之为A、B设备）。

   ```c#
   #                                   A                     B
   #                             +---------+          +----------+
   #                             | 发现设备 |   --->    | 发现设备 |
   #                             +---------+          +----------+
   #                                   |                    |
   #                                   |                    |
   #                                   v                    v
   #                              认证发起设备         认证控制设备
   ```

4. A设备点击“发起认证”按键，B设备点击“允许认证”按键，在弹出界面选择“允许”，出现PIN码显示界面。

   ```c#
   #                           A                                B
   #                                          +----------------------------------+
   #                     +---------+          | +----------+         +---------+ |           +-----------+
   #                     | 发起认证 |    --->    |  允许认证  |   --->  |  允  许  |    ----->   | PIN码显示 |
   #                     +---------+          | +----------+         +---------+ |           +-----------+
   #                                          +----------------------------------+
   ```

5. A设备点击“输入PIN码”按键，并输入B设备上显示的6位PIN码。

   ```c#
   #                                   A                      B
   #                             +----------+           +----------+
   #                             | 输入PIN码 |           | PIN码显示 |
   #                             +----------+           +----------+
   ```

6. 认证完成，界面回退到“分布式音乐播放器”界面，A、B设备串口打印如下信息，提示设备已上线。

   ```C#
   I 04100/: [devicemanagerkit][OnDeviceOnline]:DeviceManager OnDeviceOnline pkgName:com.app.music_player
   ```
7. A设备点击“播放”按键，正常播放后，点击“流转”按键，A设备暂停播放，B设备在A设备的基础上继续播放。
   ```C
   #                                A                                 B
   #                           music demo                        music demo
   #                  00:10[|||||||----------]    --->    0:11[||||||||---------]
   ```



